{% extends 'onlinecourse/base.html' %}
{% block title %}Exam Results â€¢ eLearning{% endblock %}

{% block content %}
<div class="container">
  {% if percentage_score > 80 %}
  <div class="alert alert-success" data-autoclose>
    <b>Congratulations, {{ user.first_name }}!</b> You have passed the exam and completed the course with score {{ grade }} with {{ percentage_score }}%
  </div>
  {% else %}
  <div class="alert alert-danger" data-autoclose>
    <b>Failed</b> Sorry, {{ user.first_name }}! You have failed the exam with score {{ grade }} with {{ percentage_score }}%
  </div>
  <a href="{% url 'onlinecourse:course_details' course.id %}" class="btn btn-outline-danger btn-sm">Re-test</a>
  {% endif %}

  <div class="card-columns-vertical mt-3">
    <h5 class="brand-gradient">Exam results</h5>
    {% for question in course.question_set.all %}
    <div class="card mt-2 shadow-sm rounded-xl">
      <div class="card-header"><h5 class="mb-0">{{ question.content }}</h5></div>
      <div class="card-body">
        <div class="form-group">
          {% for choice in question.choice_set.all %}
          <div class="form-check">
            {% if choice.is_correct and choice in choices %}
            <div class="text-success">Correct answer: {{ choice.content }}</div>
            {% elif choice.is_correct and not choice in choices %}
            <div class="text-warning">Not selected: {{ choice.content }}</div>
            {% elif not choice.is_correct and choice in choices %}
            <div class="text-danger">Wrong answer: {{ choice.content }}</div>
            {% else %}
            <div>{{ choice.content }}</div>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}