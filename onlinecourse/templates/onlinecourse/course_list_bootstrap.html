{% extends 'onlinecourse/base.html' %}
{% load static %}
{% block title %}Courses â€¢ eLearning{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="h3 mb-4 brand-gradient">Explore Courses</h1>
  {% if course_list %}
  <div class="courses-grid">
    {% for course in course_list %}
    <div class="card shadow-xl card-elevated">
      <img src="{{ course.image.url }}" class="card-img-top card-img-left" alt="{{ course.name }}" />
      <div class="card-body d-flex flex-column">
        <h5 class="card-title mb-1">{{ course.name }}</h5>
        <small class="text-muted">{{ course.total_enrollment }} enrolled</small>
        <p class="card-text mt-2">{{ course.description }}</p>
        <div class="mt-auto d-grid gap-2">
          <a class="btn btn-outline-secondary" href="{% url 'onlinecourse:course_details' course.id %}">Details</a>
          {% if is_learner %}
            <form action="{% url 'onlinecourse:enroll' course.id %}" method="post">
              {% csrf_token %}
              <input type="submit" class="btn btn-primary" value="{% if course.is_enrolled %}Enter{% else %}Enroll{% endif %}">
            </form>
          {% elif is_guest %}
            <a class="btn btn-primary" href="{% url 'onlinecourse:login' %}">Sign in to Enroll</a>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">No courses are available.</div>
  {% endif %}
</div>
{% endblock %}